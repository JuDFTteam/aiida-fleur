

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Plug-in Classes &mdash; Fleur plugin 0.27 beta documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Fleur plugin 0.27 beta documentation" href="index.html"/>
        <link rel="prev" title="Description" href="plugin/fleurcode_plugin.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Fleur plugin
          

          
          </a>

          
            
            
              <div class="version">
                0.27 beta
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="plugin/fleur_plugin.html">Fleur-plugin</a></li>
</ul>
<ul class="simple">
</ul>
<ul class="simple">
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Plug-in Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fleur-input-generator-plug-in">Fleur input generator plug-in</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-aiida.orm.calculation.job.fleur_inp.fleurinputgen">Fleurinputgen Calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fleurinputgen-parser">Fleurinputgen Parser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fleur-input-data-structure">Fleur input Data structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Fleur input Data structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fleurinp-modifier">Fleurinp modifier</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fleur-code-plugin">Fleur-code plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fleur-calculation">Fleur Calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fleur-parser">Fleur Parser</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fleur-tools-utility">Fleur tools/utility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-aiida.tools.codespecific.fleur.StructureData_util">Structure Data util</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aiida.tools.codespecific.fleur.xml_util">XML utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-aiida.tools.codespecific.fleur.merge_parameter">Parameter utility</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Fleur plugin</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Plug-in Classes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/code.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plug-in-classes">
<h1>Plug-in Classes<a class="headerlink" href="#plug-in-classes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fleur-input-generator-plug-in">
<h2>Fleur input generator plug-in<a class="headerlink" href="#fleur-input-generator-plug-in" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-aiida.orm.calculation.job.fleur_inp.fleurinputgen">
<span id="fleurinputgen-calculation"></span><h3>Fleurinputgen Calculation<a class="headerlink" href="#module-aiida.orm.calculation.job.fleur_inp.fleurinputgen" title="Permalink to this headline">¶</a></h3>
<p>Input plug-in for the FLEUR input generator &#8216;inpgen&#8217;.
The input generator for the Fleur code is a preprocessor
and should be run localy (with the direct scheduler) or inline,
because it does not take many resources.</p>
<dl class="class">
<dt id="aiida.orm.calculation.job.fleur_inp.fleurinputgen.FleurinputgenCalculation">
<em class="property">class </em><tt class="descclassname">aiida.orm.calculation.job.fleur_inp.fleurinputgen.</tt><tt class="descname">FleurinputgenCalculation</tt><big>(</big><em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/aiida/orm/calculation/job/fleur_inp/fleurinputgen.html#FleurinputgenCalculation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.calculation.job.fleur_inp.fleurinputgen.FleurinputgenCalculation" title="Permalink to this definition">¶</a></dt>
<dd><p>JobCalculationClass for the Inputgenerator, which is a preprocessor for a FLEUR calculation. Here is implemented how an input file for &#8216;inpgen&#8217; is written from AiiDA data objects.
For more information about produced files and the FLEUR-code family, go to <a class="reference external" href="http://www.flapw.de/">http://www.flapw.de/</a>.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.orm.calculation.job.fleur_inp.fleurinputgen.get_input_data_text">
<tt class="descclassname">aiida.orm.calculation.job.fleur_inp.fleurinputgen.</tt><tt class="descname">get_input_data_text</tt><big>(</big><em>key</em>, <em>val</em>, <em>value_only</em>, <em>mapping=None</em><big>)</big><a class="reference internal" href="_modules/aiida/orm/calculation/job/fleur_inp/fleurinputgen.html#get_input_data_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.orm.calculation.job.fleur_inp.fleurinputgen.get_input_data_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a key and a value, return a string (possibly multiline for arrays)
with the text to be added to the input file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; the flag name</li>
<li><strong>val</strong> &#8211; the flag value. If it is an array, a line for each element
is produced, with variable indexing starting from 1.
Each value is formatted using the conv_to_fortran function.</li>
<li><strong>mapping</strong> &#8211; Optional parameter, must be provided if val is a dictionary.
It maps each key of the &#8216;val&#8217; dictionary to the corresponding
list index. For instance, if <tt class="docutils literal"><span class="pre">key='magn'</span></tt>,
<tt class="docutils literal"><span class="pre">val</span> <span class="pre">=</span> <span class="pre">{'Fe':</span> <span class="pre">0.1,</span> <span class="pre">'O':</span> <span class="pre">0.2}</span></tt> and <tt class="docutils literal"><span class="pre">mapping</span> <span class="pre">=</span> <span class="pre">{'Fe':</span> <span class="pre">2,</span> <span class="pre">'O':</span> <span class="pre">1}</span></tt>,
this function will return the two lines <tt class="docutils literal"><span class="pre">magn(1)</span> <span class="pre">=</span> <span class="pre">0.2</span></tt> and
<tt class="docutils literal"><span class="pre">magn(2)</span> <span class="pre">=</span> <span class="pre">0.1</span></tt>. This parameter is ignored if &#8216;val&#8217;
is not a dictionary.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="fleurinputgen-parser">
<h3>Fleurinputgen Parser<a class="headerlink" href="#fleurinputgen-parser" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="fleur-input-data-structure">
<h2>Fleur input Data structure<a class="headerlink" href="#fleur-input-data-structure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Fleur input Data structure<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="fleurinp-modifier">
<h3>Fleurinp modifier<a class="headerlink" href="#fleurinp-modifier" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="fleur-code-plugin">
<h2>Fleur-code plugin<a class="headerlink" href="#fleur-code-plugin" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fleur-calculation">
<h3>Fleur Calculation<a class="headerlink" href="#fleur-calculation" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="fleur-parser">
<h3>Fleur Parser<a class="headerlink" href="#fleur-parser" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="fleur-tools-utility">
<h2>Fleur tools/utility<a class="headerlink" href="#fleur-tools-utility" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-aiida.tools.codespecific.fleur.StructureData_util">
<span id="structure-data-util"></span><h3>Structure Data util<a class="headerlink" href="#module-aiida.tools.codespecific.fleur.StructureData_util" title="Permalink to this headline">¶</a></h3>
<p>Collection of utility routines dealing with StructureData objects</p>
<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.abs_to_rel">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">abs_to_rel</tt><big>(</big><em>vector</em>, <em>cell</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#abs_to_rel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.abs_to_rel" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a position vector in absolut coordinates to relative coordinates.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.abs_to_rel_f">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">abs_to_rel_f</tt><big>(</big><em>vector</em>, <em>cell</em>, <em>pbc</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#abs_to_rel_f"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.abs_to_rel_f" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a position vector in absolut coordinates to relative coordinates 
for a film system.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.break_symmetry">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">break_symmetry</tt><big>(</big><em>structure, atoms=['all'], site=[], pos=[], parameterData=None</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#break_symmetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.break_symmetry" title="Permalink to this definition">¶</a></dt>
<dd><p>This routine introduces different &#8216;kind objects&#8217; in a structure
and names them that inpgen will make different species/atomgroups out of them.
If nothing specified breaks ALL symmetry (i.e. every atom gets their own kind)</p>
<p>params: StructureData
params: atoms: python list of symbols, exp: [&#8216;W&#8217;, &#8216;Be&#8217;]. This would make for</p>
<blockquote>
<div>all Be and W atoms their own kinds.</div></blockquote>
<dl class="docutils">
<dt>params: site: python list of integers, exp: [1, 4, 8]. This would create for</dt>
<dd>atom 1, 4 and 8 their own kinds.</dd>
<dt>params: pos: python list of tuples of 3, exp [(0.0, 0.0, -1.837927), ...].</dt>
<dd>This will create a new kind for the atom at that position.
Be carefull the number given has to match EXACTLY the position
in the structure.</dd>
</dl>
<p>return: StructureData, a AiiDA crystal structure with new kind specification.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.eos_structures">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">eos_structures</tt><big>(</big><em>inp_structure</em>, <em>scalelist</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#eos_structures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.eos_structures" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates many rescalled StrucutureData nodes out of a crystal structure.
Keeps the provanance in the database.</p>
<p>:param StructureData, a StructureData node (pk, sor uuid)
:param scalelist, list of floats, scaling factors for the cell</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of New StructureData nodes with rescalled structure, which are linked to input Structure</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.is_structure">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">is_structure</tt><big>(</big><em>structure</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#is_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.is_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if the given input is a StructureData node, by obejct, id, or pk
if yes returns a StructureData node in all cases
if no returns None</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.rel_to_abs">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">rel_to_abs</tt><big>(</big><em>vector</em>, <em>cell</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#rel_to_abs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.rel_to_abs" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a position vector in interal coordinates to absolut coordinates 
in Angstroem.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.rel_to_abs_f">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">rel_to_abs_f</tt><big>(</big><em>vector</em>, <em>cell</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#rel_to_abs_f"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.rel_to_abs_f" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a position vector in interal coordinates to absolut coordinates 
in Angstroem for a film structure (2D).</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.rescale">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">rescale</tt><big>(</big><em>inp_structure</em>, <em>scale</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#rescale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Rescales a crystal structure. Keeps the provanance in the database.</p>
<p>:param inp_structure, a StructureData node (pk, or uuid)
:param scale, float scaling factor for the cell</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">New StrcutureData node with rescalled structure, which is linked to input Structure
and None if inp_structure was not a StructureData</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.rescale_xyz">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">rescale_xyz</tt><big>(</big><em>inp_structure</em>, <em>scalevec</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#rescale_xyz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.rescale_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>rescales a structure a certain way...</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.StructureData_util.supercell">
<tt class="descclassname">aiida.tools.codespecific.fleur.StructureData_util.</tt><tt class="descname">supercell</tt><big>(</big><em>inp_structure</em>, <em>n_a1</em>, <em>n_a2</em>, <em>n_a3</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/StructureData_util.html#supercell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.StructureData_util.supercell" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a super cell from a StructureData node.
Keeps the provanance in the database.</p>
<p>:param StructureData, a StructureData node (pk, or uuid)
:param scale: tuple of 3 integers, number of cells in a1, a2, a3, or if cart =True in x,y,z
:param cart, Boolean #TODO needed?</p>
<p>:returns StructureData, Node with supercell</p>
</dd></dl>

</div>
<div class="section" id="module-aiida.tools.codespecific.fleur.xml_util">
<span id="xml-utility"></span><h3>XML utility<a class="headerlink" href="#module-aiida.tools.codespecific.fleur.xml_util" title="Permalink to this headline">¶</a></h3>
<p>In this module contains useful methods for handling xml trees and files which are used
by the Fleur plugin.</p>
<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.convert_from_fortran_bool">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">convert_from_fortran_bool</tt><big>(</big><em>stringbool</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#convert_from_fortran_bool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.convert_from_fortran_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string in this case (&#8216;T&#8217;, &#8216;F&#8217;, or &#8216;t&#8217;, &#8216;f&#8217;) to True or False</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>stringbool</strong> &#8211; a string (&#8216;t&#8217;, &#8216;f&#8217;, &#8216;F&#8217;, &#8216;T&#8217;)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">boolean  (either True or False)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.convert_to_fortran_bool">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">convert_to_fortran_bool</tt><big>(</big><em>boolean</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#convert_to_fortran_bool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.convert_to_fortran_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a Boolean as string to the format definded in the input</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>boolean</strong> &#8211; either a boolean or a string (&#8216;True&#8217;, &#8216;False&#8217;, &#8216;F&#8217;, &#8216;T&#8217;)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a string (either &#8216;t&#8217; or &#8216;f&#8217;)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.convert_to_fortran_string">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">convert_to_fortran_string</tt><big>(</big><em>string</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#convert_to_fortran_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.convert_to_fortran_string" title="Permalink to this definition">¶</a></dt>
<dd><p>converts some parameter strings to the format for the inpgen
:param string: some string
:returns: string in right format (extra &#8220;&#8221;)</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.create_tag">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">create_tag</tt><big>(</big><em>xmlnode</em>, <em>xpath</em>, <em>newelement</em>, <em>create=False</em>, <em>place_index=None</em>, <em>tag_order=None</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#create_tag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.create_tag" title="Permalink to this definition">¶</a></dt>
<dd><p>This method evaluates an xpath expresion and creates tag in an xmltree under the 
returned nodes. If the path does exist things will be overriden, or created.
Per default the new element is appended to the elements, but it can also be
inserted in a certain position or after certain other tags.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.eval_xpath">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">eval_xpath</tt><big>(</big><em>node</em>, <em>xpath</em>, <em>parser_info={'parser_warnings': []}</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#eval_xpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.eval_xpath" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to evalutate an xpath expression. If it fails it logs it.</p>
<p>:param root node of an etree and an xpath expression (relative, or absolute)
:returns either nodes, or attributes, or text</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.eval_xpath2">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">eval_xpath2</tt><big>(</big><em>node</em>, <em>xpath</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#eval_xpath2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.eval_xpath2" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to evalutate an xpath expression. If it fails it logs it.</p>
<p>:param root node of an etree and an xpath expression (relative, or absolute)
:returns ALWAYS a node list</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.eval_xpath3">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">eval_xpath3</tt><big>(</big><em>node</em>, <em>xpath</em>, <em>create=False</em>, <em>place_index=None</em>, <em>tag_order=None</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#eval_xpath3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.eval_xpath3" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to evalutate an xpath expression. If it fails it logs it.</p>
<p>:param root node of an etree and an xpath expression (relative, or absolute)
:returns ALWAYS a node list</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.get_inpxml_file_structure">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">get_inpxml_file_structure</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#get_inpxml_file_structure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.get_inpxml_file_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>This routine returns the structure/layout of the &#8216;inp.xml&#8217; file.</p>
<p>Basicly the plug-in should know from this routine, what things are allowed
to be set and where, i.e all attributes and their xpaths.
As a developer make sure to use this routine always of you need information
about the inp.xml file structure.
Therefore, this plug-in should be easy to adjust to other codes with xml 
files as input files. Just rewrite this routine.</p>
<p>For now the structure of the xmlinp file for fleur is hardcoded.
If big changes are in the &#8216;inp.xml&#8217; file, maintain this routine.
TODO: Maybe this is better done, by reading the xml schema datei instead.
And maybe it should also work without the schema file, do we want this?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>Nothing</strong> &#8211; TODO xml schema</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return all_switches_once:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">list of all switches (&#8216;T&#8217; or &#8216;F&#8217;) which are allowed to be set</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Return all_switches_several:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">list of all switches (&#8216;T&#8217; or &#8216;F&#8217;) which are allowed to be set</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return other_attributes_once:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">list of all attributes, which occur just once (can be tested)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Return other_attributes_several:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">list of all attributes, which can occur more then once</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return all_text:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">list of all text of tags, which can be set</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Return all_attrib_xpath:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">dictonary (attrib, xpath), of all possible attributes
with their xpath expression for the xmp inp</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Return expertkey:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><dl class="first docutils">
<dt>keyname (should not be in any other list), which can be</dt>
<dd><p class="first last">used to set anything in the file, by hand,</p>
</dd>
</dl>
<p class="last">(for experts, and that plug-in does not need to be directly maintained if
xmlinp gets a new switch)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.get_xml_attribute">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">get_xml_attribute</tt><big>(</big><em>node</em>, <em>attributename</em>, <em>parser_info_out={}</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#get_xml_attribute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.get_xml_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an attribute value from a node.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>node</strong> &#8211; a node from etree</li>
<li><strong>attributename</strong> &#8211; a string with the attribute name.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns either attributevalue, or None</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.inpxml_todict">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">inpxml_todict</tt><big>(</big><em>parent</em>, <em>xmlstr</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#inpxml_todict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.inpxml_todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursive operation which transforms an xml etree to
python dictionaries and lists.
Decision to add a list is if the tag name is in the given list tag_several</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> &#8211; some xmltree, or xml element</li>
<li><strong>xmlstr</strong> &#8211; structure/layout of the xml file in xmlstr is tags_several:
a list of the tags, which should be converted to a list, not
a dictionary(because they are known to occur more often, and
want to be accessed in a list later.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a python dictionary</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.set_species">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">set_species</tt><big>(</big><em>fleurinp_tree_copy</em>, <em>species_name</em>, <em>attributedict</em>, <em>create=False</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#set_species"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.set_species" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.write_new_fleur_xmlinp_file">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">write_new_fleur_xmlinp_file</tt><big>(</big><em>inp_file_xmltree</em>, <em>fleur_change_dic</em>, <em>xmlinpstructure</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#write_new_fleur_xmlinp_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.write_new_fleur_xmlinp_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This modifies the xml-inp file. Makes all the changes wanted by
the user or sets some default values for certain modes</p>
<p>:param inp_file_lines_o xml-tree of the xml-inp file
:param fleur_change_dic dictionary {attrib_name : value} with all the</p>
<blockquote>
<div>wanted changes.</div></blockquote>
<p>return an etree of the xml-inp file with changes.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.xml_set_all_attribv">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">xml_set_all_attribv</tt><big>(</big><em>xmltree</em>, <em>xpathn</em>, <em>attributename</em>, <em>attribv</em>, <em>create=False</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#xml_set_all_attribv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.xml_set_all_attribv" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine sets the value of an attribute in the xml file on all places it occurs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">an etree a xpath from root to the attribute and the attribute value</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None, or an etree</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Comment: Element.set will add the attribute if it does not exist,</dt>
<dd>xpath expression has to exist</dd>
<dt>example: xml_set_first_attribv(tree, &#8216;/fleurInput/atomGroups/atomGroup/force&#8217;, &#8216;relaxXYZ&#8217;, &#8216;TTF&#8217;)</dt>
<dd>xml_set_first_attribv(tree, &#8216;/fleurInput/atomGroups/atomGroup/force&#8217;, &#8216;calculate&#8217;, &#8216;F&#8217;)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.xml_set_all_text">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">xml_set_all_text</tt><big>(</big><em>xmltree</em>, <em>xpathn</em>, <em>text</em>, <em>create=False</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#xml_set_all_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.xml_set_all_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine sets the text of a tag in the xml file
Input: an etree a xpath from root to the tag and the text
Output: none, an etree
example:
xml_set_text(tree, &#8216;/fleurInput/comment&#8217;, &#8216;Test Fleur calculation for AiiDA plug-in&#8217;)
but also cordinates and Bravais Matrix!:
xml_set_text(tree, &#8216;/fleurInput/atomGroups/atomGroup/relPos&#8217;, &#8216;1.20000 PI/3 5.1-MYCrazyCostant&#8217;)</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.xml_set_attribv_occ">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">xml_set_attribv_occ</tt><big>(</big><em>xmltree, xpathn, attributename, attribv, occ=[0], create=False</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#xml_set_attribv_occ"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.xml_set_attribv_occ" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine sets the value of an attribute in the xml file on only the places
specified in occ</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">an etree a xpath from root to the attribute and the attribute value</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">occ, list of integers</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None, or an etree</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Comment: Element.set will add the attribute if it does not exist,</dt>
<dd>xpath expression has to exist</dd>
<dt>example: xml_set_first_attribv(tree, &#8216;/fleurInput/calculationSetup&#8217;, &#8216;band&#8217;, &#8216;T&#8217;)</dt>
<dd>xml_set_first_attribv(tree, &#8216;/fleurInput/calculationSetup&#8217;, &#8216;dos&#8217;, &#8216;F&#8217;)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.xml_set_first_attribv">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">xml_set_first_attribv</tt><big>(</big><em>xmltree</em>, <em>xpathn</em>, <em>attributename</em>, <em>attribv</em>, <em>create=False</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#xml_set_first_attribv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.xml_set_first_attribv" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine sets the value of an attribute in the xml file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">an etree a xpath from root to the attribute and the attribute value</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None, or an etree</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Comment: Element.set will add the attribute if it does not exist,</dt>
<dd>xpath expression has to exist</dd>
<dt>example: xml_set_first_attribv(tree, &#8216;/fleurInput/calculationSetup&#8217;, &#8216;band&#8217;, &#8216;T&#8217;)</dt>
<dd>xml_set_first_attribv(tree, &#8216;/fleurInput/calculationSetup&#8217;, &#8216;dos&#8217;, &#8216;F&#8217;)</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.xml_util.xml_set_text">
<tt class="descclassname">aiida.tools.codespecific.fleur.xml_util.</tt><tt class="descname">xml_set_text</tt><big>(</big><em>xmltree</em>, <em>xpathn</em>, <em>text</em>, <em>create=False</em>, <em>place_index=None</em>, <em>tag_order=None</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/xml_util.html#xml_set_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.xml_util.xml_set_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine sets the text of a tag in the xml file
Input: an etree a xpath from root to the tag and the text
Output: none, an etree
example:
xml_set_text(tree, &#8216;/fleurInput/comment&#8217;, &#8216;Test Fleur calculation for AiiDA plug-in&#8217;)
but also cordinates and Bravais Matrix!:
xml_set_text(tree, &#8216;/fleurInput/atomGroups/atomGroup/relPos&#8217;, &#8216;1.20000 PI/3 5.1-MYCrazyCostant&#8217;)</p>
</dd></dl>

</div>
<div class="section" id="module-aiida.tools.codespecific.fleur.merge_parameter">
<span id="parameter-utility"></span><h3>Parameter utility<a class="headerlink" href="#module-aiida.tools.codespecific.fleur.merge_parameter" title="Permalink to this headline">¶</a></h3>
<p>This module, contains a method to merge parameterData nodes used by the FLEUR inpgen.
This might also be of interest for other all-ellectron codes</p>
<dl class="function">
<dt id="aiida.tools.codespecific.fleur.merge_parameter.merge_parameter">
<tt class="descclassname">aiida.tools.codespecific.fleur.merge_parameter.</tt><tt class="descname">merge_parameter</tt><big>(</big><em>ParameterData1</em>, <em>ParameterData2</em>, <em>overwrite=True</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/merge_parameter.html#merge_parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.merge_parameter.merge_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Merges two parameterData nodes. 
Additive: uses all namelists of both.
If they have a namelist in common. ParameterData2 will overwrite the namelist
of parameterData. If this is not wanted. set overwrite = False. 
Then attributes of both will be added, but attributes from ParameterData1 won&#8217;t
be oeverwritten.</p>
<p>param: AiiDA ParamterData Node
param: AiiDA ParamterData Node</p>
<p>returns: AiiDA ParamterData Node</p>
</dd></dl>

<dl class="function">
<dt id="aiida.tools.codespecific.fleur.merge_parameter.merge_parameters">
<tt class="descclassname">aiida.tools.codespecific.fleur.merge_parameter.</tt><tt class="descname">merge_parameters</tt><big>(</big><em>ParameterDataList</em>, <em>overwrite=True</em><big>)</big><a class="reference internal" href="_modules/aiida/tools/codespecific/fleur/merge_parameter.html#merge_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.tools.codespecific.fleur.merge_parameter.merge_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge together all parameter nodes in the given list.</p>
</dd></dl>

</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="plugin/fleurcode_plugin.html" class="btn btn-neutral" title="Description" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jens Broeder.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.27 beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>