dist: trusty
#sudo: required
language: python

python: 
    - "2.7"

notifications:
  slack:
    on_success: never

services:
    - postgresql

addons:
    postgresql: "9.5"
    apt:
        packages:
            - texlive-base
            - texlive-generic-recommended
            - texlive-fonts-recommended
            - texlive-latex-base
            - texlive-latex-recommended
            - texlive-latex-extra
            - dvipng
            - dvidvi
            - graphviz

#cache: pip

before_install:  # copied from pgtest's travis.yml
    - sudo apt-get install locate
    - sudo service postgresql stop
    - sudo apt-get remove postgresql
    - sudo apt-get install postgresql
    - sudo updatedb

install:
    - pip install -U pip wheel setuptools
    - pip install -e git+https://github.com/aiidateam/aiida_core@develop#egg=aiida-core[testing]
    - pip install -e .

env:
    - TEST_TYPE="unittests"
    - TEST_TYPE="docs"

script: .ci/test_script.sh

git:
  depth: 3
